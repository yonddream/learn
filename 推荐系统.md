推荐算法在各行各业中应用的非常广，但是今天我们不讲推荐算法在各行各业中的用法。为了广大的程序猿单身狗，我们要用技术的手段来解决单身问题。为你推荐和你兴趣爱好最匹配的女生，我们要用技术改变自己。  
下面我们就来教你，一步步实现一个简单的基于协同过滤的女性友人推荐系统，代码均由Python编写。
### 1.数据收集
不同的业务，不同的推荐系统需要收集的信息不一样。我们这里以10多个美女，30多个兴趣爱好为例随机生成150-200条用户评分数据。

	图片1

gen_user_data函数会生成一个字典，字典的键是用户，值是用户对每个兴趣爱好的分数。生成的数据如下：

	图片2
	
有了数据之后，我们可以正式的来开始干活了，推荐系统需要做什么事情了？
对我们的推荐系统来说，需要解决的几个主要问题有：  

1. 判断兴趣爱好的相似度，自己和美女们的相似度  
2. 找到和自己最相似的兴趣爱好，或找到有同样兴趣爱好的美女  
3. 找到自己可能喜欢的兴趣爱好，或找到对兴趣爱好感兴趣的美女  

### 2.判断用户相似度
针对我们这个例子，我们就是需要判断两个兴趣爱好的相似度，两个人的相似度。
####2.1欧几里得距离计算相似度
最简单的，最容易理解的就是欧几里得距离，那么什么是欧几里得距离，如何在我们的例子中使用了？请看评价数据，看下图：  

	图片3
	
我们用两个兴趣爱好摄影和跑步来举例。图中X轴代表摄影，Y轴代表跑步。Nolan给摄影打2分，跑步打3分，画在图上。  
同理我们将Grill和Cara的数据点都画在图上。很明显我们可以看出Nolan和Grill离的近，与Cara离的远，所以我们说Nolan与Grill兴趣相近，用数学式表达出来就是：   
Nolan与Grill的距离的平方： (4-2)^2 + (5-3)^2 = 8  
Nolan与Cara的距离的平方： (8-2)^2 + (7-3)^2 = 52  
8 < 52 所以Nolan与Grill的兴趣比Cara近，这就是利用欧几里得距离来判断相似度。


####2.2归一化处理
为了方便比较处理后的数据，一般还需要对计算出来的数据进行归一化处理。  

数据标准化（归一化）处理是数据挖掘的一项基础工作，不同评价指标往往具有不同的量纲和量纲单位，这样的情况会影响到数据分析的结果，为了消除指标之间的量纲影响，需要进行数据标准化处理，以解决数据指标之间的可比性。原始数据经过数据标准化处理后，各指标处于同一数量级，适合进行综合对比评价。  

简单点说，就是我们希望处理后的数据取值范围在0-1之间，方便我们进行比较。
数学上有很多归一化处理的方法，我们这里就使用一个最简单的公式。  
假设计算出来得欧几里得距离为：n  
1 / (1 + n)  
当距离为0，归一化后的值为：1  
距离越大，归一化后的值越接近0  

有了上面的一些理论知识，我们的代码就水到渠成了，代码非常简单。

	图片4
	
### 3.找到兴趣类似的人，某兴趣爱好最类似的兴趣爱好
这一步就是直接为我们找到兴趣爱好最匹配的人，同时还可以根据我的已有兴趣爱好来给我筛选出最类似的兴趣爱好。 

a. 有了上面的代码，找到和自己同样兴趣的人，就非常简单了。只需要将自己和其他所有用户计算下相似度，然后排序就可以得到了。  
b. 找到和某兴趣爱好最类似的兴趣爱好，这个需要稍微改变下，我们输入的数据是用户为字典的键，兴趣爱好为值中的字典的键。所以我们需要写个函数将字典给转换下，让结构变成字典的键是兴趣爱好，值是用户和用户的打分数。

	图片5
	
下面可以给大家演示下寻找和Nolan最相类似的用户，和音乐最类似的兴趣爱好。下面我们在python自带的ide中运行下代码，看看排名前五的：

	图片6
	
在本例中可以看和Nolan最类似的是Ada，和音乐最类似的是羽毛球。哈哈已经知道目标了吧，开始下手吧。

### 4.找到可能喜欢的兴趣爱好，找到对兴趣爱好感兴趣的用户
我们可能不止需要了解自己或别人现有的兴趣爱好，可能还需要扩展一些可能喜欢的兴趣爱好，或者筛选出对某个兴趣爱好感兴趣的美女们。  
最理想的是找到两个相似度一样的人，可以认为其中一个喜欢的，另外一个也喜欢。但是这样也有它的缺点，会有很大得误差。我们需要将所有人的数据都带入计算。

1. 先计算所有人和Emma的相似度。
2. 对Emma没有的，没有评分，而其他人有评分的兴趣爱好，将其与相似度相乘，得到的值再除以相似度之和。这样就是将所有人的数据都带入计算，可以得到一个比较公正的值。
3. 排序，选出评分最高的，就知道需要推荐什么兴趣爱好了。

下面我们来看详细的代码：

	图片7
	
我们以上面的例子为例，继续计算Emma感兴趣的兴趣爱好和对"音乐"感兴趣的人。

	图片8
	
可以看到Emma除开现在的兴趣爱好外，最感兴趣的爱好可能是下棋，对音乐最感兴趣的可能是Gill。  

这只是一个简单的推荐系统的雏型，当然，要实现一个可用的推荐系统，还有很多工作要做。比如收集的数据多样化，推荐的精确度。比如数据量大了之后，性能问题，扩展性？是基于用户推荐还是物品推荐？



	
		
